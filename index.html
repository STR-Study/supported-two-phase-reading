<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>STR Reading Demo</title>

<style>
body {
  font-family: sans-serif;
  display: flex;
  flex-direction: column;
  height: 100vh;
  height: 100dvh;
  margin: 0;
  background: white;
  overflow: hidden;
}

#counter {
  padding: 8px;
  font-size: 13px;
  color: #888;
  text-align: center;
  border-bottom: 1px solid #eee;
  flex-shrink: 0;
}

#content {
  flex-grow: 1;
  padding: 15px 20px;
  overflow-y: auto;
  font-size: 18px;
  line-height: 1.6;
  -webkit-overflow-scrolling: touch;
}

.footer {
  padding: 10px 20px;
  border-top: 1px solid #eee;
  background: white;
  display: flex;
  justify-content: center;
  padding-bottom: calc(10px + env(safe-area-inset-bottom));
}

button {
  width: 100%;
  max-width: 400px;
  padding: 14px;
  font-size: 18px;
  background: #007AFF;
  color: white;
  border: none;
  border-radius: 12px;
  cursor: pointer;
}

button:active { background: #0056b3; }

#id-input {
  padding: 12px;
  font-size: 24px;
  text-align: center;
  width: 140px;
  border: 2px solid #007AFF;
  border-radius: 10px;
  margin-top: 10px;
}
</style>
</head>

<body>

<div id="counter">
  Session identifier (non-personal)
</div>

<div id="content" style="text-align:center;">
  <h3>Welcome</h3>

  <p>
    This page demonstrates the <strong>Supported Two-Phase Reading (STR)</strong> protocol.<br>
    Data logging is limited to a closed pilot and session-level statistics only.
  </p>

  <p>
    Please enter any 4 digits to generate a temporary session code<br>
    <span style="color:green;">
      (будь ласка введіть будь-які 4 цифри для початку)
    </span>
  </p>

  <input id="id-input"
       type="text"
       inputmode="numeric"
       pattern="\d{4}"
       placeholder=""
       maxlength="4"
       autocomplete="off"
       autocorrect="off"
       spellcheck="false">
</div>

<div class="footer">
  <button id="main-btn" onclick="startApp()">Start</button>
</div>

<script>
/* ================= CONFIG ================= */

const LOG_ENDPOINT =
  "https://script.google.com/macros/s/AKfycbyttCPhcDJ_PVMSO7hfSATFH1vSojT15bknuioFVx0OySy-m6W3DllE3jjGKQU-e-BCBg/exec";

const LOGGING_ENABLED = true;

/* ================= DATA ================= */

const pages = [
  
  
  
              // ЧАНК 1
`
<p>I am a very old man <span style="color: green">(я дуже старий чоловік)</span>. I don't know how old I am <span style="color: green">(я не знаю, скільки мені років)</span>. Maybe I am a hundred years old <span style="color: green">(можливо, мені сто років)</span>, maybe more <span style="color: green">(можливо, більше)</span>. I have never aged <span style="color: green">(я ніколи не старів; <i>to age – старіти, старіння</i>)</span> as other men <span style="color: green">(як інші люди)</span>. I don't remember my childhood <span style="color: green">(я не пам'ятаю своє дитинство; <i>childhood – дитинство, дитячі роки</i>)</span>. It seems that I've always been thirty <span style="color: green">(здається, мені завжди було тридцять; <i>to seem – здаватися, виглядати</i>)</span>. Today I look just as <span style="color: green">(сьогодні я виглядаю точно так само, як)</span> forty years and more ago <span style="color: green">(сорок і більше років тому)</span>. But I feel that I can't live forever <span style="color: green">(але я відчуваю, що не можу жити вічно; <i>forever – назавжди, вічно</i>)</span>. Someday I will die for good <span style="color: green">(колись я помру назавжди; <i>someday – колись, одного дня; for good – назавжди, остаточно</i>)</span> and there will be no resurrection <span style="color: green">(і не буде воскресіння; <i>resurrection – воскресіння, відродження</i>)</span>. It's strange that I'm still afraid to die <span style="color: green">(дивно, що я досі боюся померти; <i>strange – дивний, незвичайний; afraid – наляканий, що боїться</i>)</span>. Because I have died twice <span style="color: green">(тому що я помирав двічі; <i>to die, died, died – помирати, вмирати; twice – двічі</i>)</span> and I am still alive <span style="color: green">(і я досі живий; <i>alive – живий, жвавий</i>)</span>. But I still have this terror of death <span style="color: green">(але в мене досі є цей жах смерті; <i>terror – жах, терор, страх</i>)</span>, like a man who has never died <span style="color: green">(як у людини, яка ніколи не помирала)</span>. I believe that I am mortal <span style="color: green">(я вірю, що я смертний; <i>to believe – вірити, довіряти; mortal – смертний, смертельний</i>)</span>.</p>
`,

`
<p>I am a very old man. I don't know how old I am. Maybe I am a hundred years old, maybe more. I have never aged as other men. I don't remember my childhood. It seems that I've always been thirty. Today I look just as forty years and more ago. But I feel that I can't live forever. Someday I will die for good and there will be no resurrection. It's strange that I'm still afraid to die. Because I have died twice and I am still alive. But I still have this terror of death, like a man who has never died. I believe that I am mortal.</p>
`,

// ЧАНК 2
`
<p>And because of this <span style="color: green">(і через це)</span> I have decided to write down <span style="color: green">(я вирішив записати; <i>to write, wrote, written – писати</i>)</span> the story of the interesting periods <span style="color: green">(історію цікавих періодів)</span> of my life and of my death <span style="color: green">(мого життя і моєї смерті)</span>. I want to tell you <span style="color: green">(я хочу розповісти вам)</span> about some strange events <span style="color: green">(про деякі дивні події; <i>strange – дивний, незвичайний, чужий</i>)</span>. The events that happened to me <span style="color: green">(події, які сталися зі мною)</span> during the ten years <span style="color: green">(протягом десяти років)</span> that my dead body lay <span style="color: green">(коли моє мертве тіло лежало; <i>to lie, lay, lain – лежати</i>)</span> in an Arizona cave <span style="color: green">(в печері в Арізоні)</span>.</p>
<p>I have never told this story <span style="color: green">(я ніколи не розповідав цю історію)</span>. I know that the average human <span style="color: green">(я знаю, що пересічна людина; <i>average – середній, звичайний, пересічний</i>)</span> will not believe it <span style="color: green">(не повірить цьому)</span>. But I hope that science <span style="color: green">(але я сподіваюся, що наука)</span> will prove it one day <span style="color: green">(одного дня доведе це; <i>to prove – доводити, підтверджувати</i>)</span>. Possibly my knowledge about Mars <span style="color: green">(можливо, мої знання про Марс)</span> will help you understand its mysteries <span style="color: green">(допоможуть вам зрозуміти його таємниці; <i>mystery – таємниця, загадка</i>)</span>.</p>
<p>My name is John Carter <span style="color: green">(мене звуть Джон Картер)</span>. People know me as Captain Jack Carter <span style="color: green">(люди знають мене як капітана Джека Картера)</span> of Virginia <span style="color: green">(з Вірджинії)</span>. At the end of the Civil War <span style="color: green">(наприкінці громадянської війни)</span> I was masterless and penniless <span style="color: green">(я був без господаря і без грошей; <i>masterless – без господаря, незалежний; penniless – без грошей, бідний</i>)</span>. So I decided to go southwest <span style="color: green">(тому я вирішив піти на південний захід)</span> to find gold <span style="color: green">(шукати золото; <i>to find, found, found – знаходити, шукати</i>)</span>.</p>
`,

`
<p>And because of this I have decided to write down the story of the interesting periods of my life and of my death. I want to tell you about some strange events. The events that happened to me during the ten years that my dead body lay in an Arizona cave.</p>
<p>I have never told this story. I know that the average human will not believe it. But I hope that science will prove it one day. Possibly my knowledge about Mars will help you understand its mysteries.</p>
<p>My name is John Carter. People know me as Captain Jack Carter of Virginia. At the end of the Civil War I was masterless and penniless. So I decided to go southwest to find gold.</p>
`,
			
// ЧАНК 3
`
<p>Captain James K. Powell of Richmond and I <span style="color: green">(капітан Джеймс К. Пауелл з Річмонда і я)</span> spent one year searching for gold <span style="color: green">(провели один рік у пошуках золота; <i>to spend, spent, spent – витрачати, проводити час</i>)</span>. Powell was another Confederate officer <span style="color: green">(Пауелл був ще одним офіцером конфедератів; <i>Confederate – конфедерат, прихильник Конфедеративних Штатів Америки під час Громадянської війни</i>)</span>, and my close friend <span style="color: green">(і моїм близьким другом)</span>. We got really lucky <span style="color: green">(нам дуже пощастило; <i>to get, got, got – отримувати, ставати, діставатися; lucky – щасливий, удачливий</i>)</span>, and late in the winter of 1865 <span style="color: green">(і наприкінці зими 1865 року)</span> we found a great gold-bearing quartz vein <span style="color: green">(ми знайшли чудову золотоносну кварцову жилу; <i>gold-bearing – золотоносний; quartz – кварц; vein – жила, прожилка</i>)</span>. Powell was also a mining engineer by education <span style="color: green">(Пауелл також був гірничим інженером за освітою; <i>mining – гірничий, видобувний; engineer – інженер</i>)</span>. So he said that our discovery <span style="color: green">(тому він сказав, що наше відкриття; <i>discovery – відкриття, виявлення</i>)</span> was worth a million dollars <span style="color: green">(коштує мільйон доларів; <i>worth – вартий, що коштує</i>)</span>.</p>
<p>But our equipment was bad <span style="color: green">(але наше обладнання було поганим; <i>equipment – обладнання, устаткування</i>)</span>. So we decided that one of us <span style="color: green">(тому ми вирішили, що один з нас)</span> must return to civilization <span style="color: green">(повинен повернутися до цивілізації; <i>civilization – цивілізація, культура</i>)</span>. And then return with machinery and men <span style="color: green">(а потім повернутися з машинами і людьми; <i>machinery – машини, механізми, устаткування</i>)</span>.</p>
<p>Powell knew the country and the machines well <span style="color: green">(Пауелл добре знав місцевість і машини; <i>to know, knew, known – знати, розуміти</i>)</span>, so he was the one to go <span style="color: green">(тому саме він мав їхати)</span>. And I was supposed to stay here <span style="color: green">(а я мав залишитися тут; <i>to be supposed to – мати, бути зобов'язаним</i>)</span> and keep an eye on our finding <span style="color: green">(і стежити за нашою знахідкою; <i>to keep an eye on – стежити за, наглядати за; finding – знахідка, відкриття</i>)</span>. Simple as that <span style="color: green">(просто і все; <i>простіше кажучи, от і все</i>)</span>.</p>
`,

`
<p>Captain James K. Powell of Richmond and I spent one year searching for gold. Powell was another Confederate officer, and my close friend. We got really lucky, and late in the winter of 1865 we found a great gold-bearing quartz vein. Powell was also a mining engineer by education. So he said that our discovery was worth a million dollars.</p>
<p>But our equipment was bad. So we decided that one of us must return to civilization. And then return with machinery and men.</p>
<p>Powell knew the country and the machines well, so he was the one to go. And I was supposed to stay here and keep an eye on our finding. Simple as that.</p>
`,
// ЧАНК 4
`
<p>On March 3, 1866 <span style="color: green">(3 березня 1866 року)</span>, we packed food <span style="color: green">(ми запакували їжу; <i>to pack – пакувати, укладати</i>)</span> as well as other necessary things <span style="color: green">(а також інші необхідні речі; <i>as well as – а також, так само як; necessary – необхідний, потрібний</i>)</span> for my friend's journey <span style="color: green">(для подорожі мого друга; <i>journey – подорож, поїздка</i>)</span>. He got on his horse <span style="color: green">(він сів на коня; <i>to get on – сідати на, залізати на</i>)</span>, waved me goodbye <span style="color: green">(помахав мені на прощання; <i>to wave – махати, розмахувати; goodbye – до побачення, прощання</i>)</span> and left <span style="color: green">(і поїхав; <i>to leave, left, left – залишати, покидати, від'їжджати</i>)</span>. Through the mountainside <span style="color: green">(через схил гори; <i>mountainside – схил гори, гірський схил</i>)</span>, he rode towards the valley <span style="color: green">(він їхав у напрямку долини; <i>to ride, rode, ridden – їздити верхи; towards – у напрямку, до; valley – долина</i>)</span>. It was the first stage <span style="color: green">(це був перший етап; <i>stage – етап, стадія, сцена</i>)</span> of his journey <span style="color: green">(його подорожі)</span>.</p>
<p>The morning of Powell's departure <span style="color: green">(ранок від'їзду Пауелла; <i>departure – від'їзд, відправлення</i>)</span> was clear and beautiful <span style="color: green">(був ясним і прекрасним; <i>clear – ясний, чистий, зрозумілий</i>)</span>, almost like all Arizona mornings <span style="color: green">(майже як усі ранки в Арізоні)</span>. I could see him <span style="color: green">(я міг бачити його)</span> and his animals <span style="color: green">(і його тварин; <i>animals – тварини, звірі</i>)</span> going down the mountainside <span style="color: green">(які спускалися схилом гори; <i>to go down – спускатися, йти вниз</i>)</span> towards the valley <span style="color: green">(у напрямку долини)</span>. I would occasionally look at them <span style="color: green">(я час від часу дивився на них; <i>occasionally – час від часу, іноді, випадково</i>)</span>. I lost sight of Powell <span style="color: green">(я втратив Пауелла з поля зору; <i>to lose sight of – втрачати з поля зору; to lose, lost, lost – втрачати, губити</i>)</span> at about three in the afternoon <span style="color: green">(приблизно о третій годині дня; <i>about – приблизно, близько; afternoon – день, друга половина дня</i>)</span>.</p>
`,

`
<p>On March 3, 1866, we packed food as well as other necessary things for my friend's journey. He got on his horse, waved me goodbye and left. Through the mountainside, he rode towards the valley. It was the first stage of his journey.</p>
<p>The morning of Powell's departure was clear and beautiful, almost like all Arizona mornings. I could see him and his animals going down the mountainside towards the valley. I would occasionally look at them. I lost sight of Powell at about three in the afternoon.</p>
`,
			
// ЧАНК 5
`
<p>Half an hour later <span style="color: green">(через півгодини; <i>half – половина; an hour – година</i>)</span> I glanced across the valley again <span style="color: green">(я знову глянув через долину; <i>to glance – кидати погляд, поглядати мимохідь; across – через, поперек; valley – долина</i>)</span>. I saw three little dots <span style="color: green">(я побачив три маленькі крапки; <i>dots – крапки, точки</i>)</span> in the same place I had last seen <span style="color: green">(в тому ж місці, де востаннє бачив; <i>to see, saw, seen – бачити</i>)</span> my friend and his animals <span style="color: green">(мого друга та його тварин)</span>. It was surprising <span style="color: green">(це було дивно; <i>surprising – дивовижний, несподіваний</i>)</span>, but I decided not to worry <span style="color: green">(але я вирішив не хвилюватися; <i>to decide – вирішувати, приймати рішення; to worry – хвилюватися, турбуватися</i>)</span>. Maybe those dots were antelope <span style="color: green">(можливо, ті крапки були антилопами; <i>antelope – антилопа</i>)</span> or wild horses <span style="color: green">(або дикими кіньми; <i>wild – дикий, необроблений</i>)</span>? I tried to convince myself <span style="color: green">(я намагався переконати себе; <i>to try – намагатися, пробувати; to convince – переконувати</i>)</span> Powell was okay <span style="color: green">(що Пауелл у порядку; <i>okay – добре, гаразд, у порядку</i>)</span>, and it worked for some time <span style="color: green">(і це спрацювало на деякий час; <i>to work – працювати, діяти, спрацьовувати</i>)</span>. But then I got really uneasy <span style="color: green">(але потім я став справді неспокійним; <i>to get – ставати, робитися; uneasy – неспокійний, стурбований</i>)</span>.</p>
<p>Since we had entered the territory <span style="color: green">(відколи ми увійшли на територію; <i>since – відколи, з тих пір як; to enter – входити, вступати; territory – територія</i>)</span> we had not seen a hostile Indian <span style="color: green">(ми не бачили ворожого індіанця; <i>hostile – ворожий, вороже налаштований</i>)</span>. And we had become careless <span style="color: green">(і ми стали необережними; <i>to become, became, become – ставати, робитися; careless – необережний, недбалий</i>)</span>. However, there were stories <span style="color: green">(однак, були розповіді; <i>however – однак, проте; stories – історії, розповіді</i>)</span> of vicious marauding <span style="color: green">(про жорстокі набіги; <i>vicious – жорстокий, злісний; marauding – мародерство, набіги</i>)</span>. They haunted the trails <span style="color: green">(вони переслідували стежки; <i>to haunt – переслідувати, не давати спокою; trails – стежки, шляхи</i>)</span>, caught white men <span style="color: green">(ловили білих людей; <i>to catch, caught, caught – ловити, хапати</i>)</span> and then tortured them <span style="color: green">(а потім катували їх; <i>to torture – катувати, мучити</i>)</span>.</p>
`,

`
<p>Half an hour later I glanced across the valley again. I saw three little dots in the same place I had last seen my friend and his animals. It was surprising, but I decided not to worry. Maybe those dots were antelope or wild horses? I tried to convince myself Powell was okay, and it worked for some time. But then I got really uneasy.</p>
<p>Since we had entered the territory we had not seen a hostile Indian. And we had become careless. However, there were stories of vicious marauding. They haunted the trails, caught white men and then tortured them.</p>
`,

  
  
  
];

let index = -1;
let startTime = null;
let logs = [];
let sessionId = "0000";

/* ================= FLOW ================= */

function startApp() {
  const input = document.getElementById("id-input");
  const value = input.value.trim();
  
  // Жёсткая проверка: только 4 цифры
  if (!/^\d{4}$/.test(value)) {
    alert("Please enter exactly 4 digits\nExample: 1234, 9876, 0001");
    input.focus();
    input.value = ""; // Очищаем поле
    input.setAttribute("placeholder", value || "1234"); // Восстанавливаем placeholder
    return;
  }
  
  // Сохраняем ID и продолжаем
  sessionId = value;
  document.getElementById("main-btn").onclick = nextPage;
  nextPage();
}
function nextPage() {
  const now = Date.now();

  if (index >= 0 && index < pages.length && startTime !== null) {
    logs.push({
      page: index + 1,
      duration: ((now - startTime) / 1000).toFixed(2)
    });
  }

  index++;

  if (index < pages.length) {
    const content = document.getElementById("content");
    content.style.textAlign = "left";
    content.innerHTML = pages[index];
    content.scrollTop = 0;

    document.getElementById("counter").innerHTML =
      "Page " + (index + 1) + " of " + pages.length;

    const btn = document.getElementById("main-btn");
    btn.innerHTML = (index % 2 === 0)
      ? "Now without translation →"
      : "Next block →";

    startTime = Date.now();

  } else {
    sendLogs();

    document.getElementById("content").innerHTML =
      "<h3>Done</h3><p>You have completed all reading blocks.</p>";

    // Скрываем кнопку вместо изменения её функционала
    const btn = document.getElementById("main-btn");
    btn.style.display = "none"; // или btn.classList.add("hidden");
  }
}

/* ================= LOGGING ================= */

function sendLogs() {
  if (!LOGGING_ENABLED || !logs.length) {
    console.log("Logging disabled or no logs");
    return;
  }

  console.log("Sending logs:", logs);

  fetch(LOG_ENDPOINT, {
    method: "POST",
    headers: { "Content-Type": "text/plain;charset=utf-8" },
    body: JSON.stringify({
      session_id: sessionId,
      logs: logs
    })
  })
  .then(() => {
    console.log("Logs sent (request completed)");
  })
  .catch(err => {
    console.error("Log send failed", err);
  });
}

</script>

</body>
</html>








